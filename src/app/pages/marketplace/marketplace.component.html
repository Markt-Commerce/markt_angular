<div class="marketplace-container">
  <!-- Header Section -->
  <div class="marketplace-header">
    <div class="header-content">
      <h1 class="marketplace-title">Marketplace</h1>
      <p class="marketplace-subtitle">Discover unique items from trusted sellers</p>
    </div>
    
    <!-- Search and Filter Controls -->
    <div class="marketplace-controls">
      <app-search-bar 
        [placeholder]="'Search products, brands, or sellers...'"
        (search)="onSearch($event)"
        class="marketplace-search">
      </app-search-bar>
      
      <app-filter-bar 
        [categories]="categories"
        (filterChange)="onFilterChange($event)"
        class="marketplace-filter">
      </app-filter-bar>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-text">Loading marketplace...</p>
  </div>

  <!-- Marketplace Content -->
  <div *ngIf="!isLoading" class="marketplace-content">
    <!-- Categories Section -->
    <section class="categories-section">
      <div class="section-header">
        <h2 class="section-title">Categories</h2>
      </div>
      
      <div class="categories-grid">
        <div 
          *ngFor="let category of categories" 
          class="category-card"
          [class.active]="currentCategory() === category.id"
          (click)="onCategoryChange(category.id)">
          <div class="category-icon">{{ category.name.charAt(0) }}</div>
          <div class="category-info">
            <h3 class="category-name">{{ category.name }}</h3>
            <p class="category-count">{{ category.count }} items</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Featured Products Section -->
    <section class="featured-section" *ngIf="featuredProducts().length > 0">
      <div class="section-header">
        <h2 class="section-title">Featured Products</h2>
        <button class="view-all-btn">View All</button>
      </div>
      
      <app-featured-list 
        [items]="featuredProducts()"
        (itemClick)="onProductClick($event.id)"
        class="featured-list">
      </app-featured-list>
    </section>

    <!-- Products Grid Section -->
    <section class="products-section">
      <div class="section-header">
        <div class="header-left">
          <h2 class="section-title">All Products</h2>
          <p class="product-count">{{ getFilteredProducts().length }} items found</p>
        </div>
        <div class="section-actions">
          <button class="action-btn" title="Sort by Price">
            <span class="action-icon">
              <i class="ph-currency-dollar"></i>
            </span>
          </button>
          <button class="action-btn" title="Sort by Date">
            <span class="action-icon">
              <i class="ph-calendar"></i>
            </span>
          </button>
          <button class="action-btn" title="Grid View">
            <span class="action-icon">
              <i class="ph-squares-four"></i>
            </span>
          </button>
        </div>
      </div>

      <!-- Products Grid -->
      <div class="products-grid">
        <div 
          *ngFor="let product of getFilteredProducts()" 
          class="product-item"
          [@fadeInUp]>
          <app-product-card 
            [product]="product"
            (productClick)="onProductClick(product.id)">
          </app-product-card>
          
          <!-- Discount Badge -->
          <div *ngIf="getDiscountPercentage(product)" class="discount-badge">
            -{{ getDiscountPercentage(product) }}%
          </div>
        </div>
      </div>

      <!-- Load More Button -->
      <div class="load-more-container" *ngIf="hasMoreProducts()">
        <button 
          class="load-more-btn"
          (click)="onLoadMore()">
          <span class="btn-icon">
            <i class="ph-package"></i>
          </span>
          <span class="btn-text">Load More Products</span>
        </button>
      </div>
    </section>

    <!-- Quick Actions Section -->
    <section class="quick-actions-section">
      <div class="section-header">
        <h2 class="section-title">Quick Actions</h2>
      </div>
      
      <div class="actions-grid">
        <button class="action-card">
          <span class="action-icon">
            <i class="ph-plus"></i>
          </span>
          <span class="action-text">Sell Item</span>
        </button>
        <button class="action-card">
          <span class="action-icon">
            <i class="ph-magnifying-glass"></i>
          </span>
          <span class="action-text">Find Specific</span>
        </button>
        <button class="action-card">
          <span class="action-icon">
            <i class="ph-chat-circle"></i>
          </span>
          <span class="action-text">Chat with Seller</span>
        </button>
        <button class="action-card">
          <span class="action-icon">
            <i class="ph-star"></i>
          </span>
          <span class="action-text">Save Search</span>
        </button>
      </div>
    </section>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && getFilteredProducts().length === 0" class="empty-state">
    <div class="empty-icon">
      <i class="ph-shopping-bag"></i>
    </div>
    <h3 class="empty-title">No products found</h3>
    <p class="empty-description">
      Try adjusting your search criteria or browse different categories
    </p>
    <button class="empty-action-btn">
      <span class="btn-icon">
        <i class="ph-arrows-clockwise"></i>
      </span>
      <span class="btn-text">Clear Filters</span>
    </button>
  </div>

  <!-- Floating Action Button -->
  <button class="fab-sell-item" title="Sell Item">
    <span class="fab-icon">
      <i class="ph-currency-dollar"></i>
    </span>
  </button>
</div>
